using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TileSprite : MonoBehaviour
{
  public Sprite[] sprites;
  public bool[] neigbours = new bool[8];
  private static Dictionary<int, int> indexToTile = new Dictionary<int, int>(){
        {0, 15},
        {1, 15},
        {2, 11},
        {3, 11},
        {4, 15},
        {5, 15},
        {6, 11},
        {7, 11},
        {8, 12},
        {9, 12},
        {10,  8},
        {11,  8},
        {12,  12},
        {13,  12},
        {14,  8},
        {15,  8},
        {16,  15},
        {17,  15},
        {18,  11},
        {19,  11},
        {20,  15},
        {21,  15},
        {22,  11},
        {23,  11},
        {24,  12},
        {25,  12},
        {26,  11},
        {27,  11},
        {28,  12},
        {29,  12},
        {30,  8},
        {31,  8},
        {32,  3},
        {33,  3},
        {34,  7},
        {35,  7},
        {36,  3},
        {37,  3},
        {38,  7},
        {39,  7},
        {40,  0},
        {41,  0},
        {42,  4},
        {43,  4},
        {44,  0},
        {45,  0},
        {46,  4},
        {47,  4},
        {48,  3},
        {49,  3},
        {50,  7},
        {51,  7},
        {52,  3},
        {53,  3},
        {54,  7},
        {55,  7},
        {56,  0},
        {57,  0},
        {58,  4},
        {59,  4},
        {60,  0},
        {61,  0},
        {62,  4},
        {63,  4},
        {64,  15},
        {65,  15},
        {66,  11},
        {67,  11},
        {68,  15},
        {69,  15},
        {70,  11},
        {71,  11},
        {72,  12},
        {73,  12},
        {74,  8},
        {75,  8},
        {76,  12},
        {77,  12},
        {78,  8},
        {79,  8},
        {80,  15},
        {81,  15},
        {82,  11},
        {83,  11},
        {84,  15},
        {85,  15},
        {86,  11},
        {87,  11},
        {88,  12},
        {89,  12},
        {90,  8},
        {91,  8},
        {92,  12},
        {93,  12},
        {94,  8},
        {95,  8},
        {96,  3},
        {97,  3},
        {98,  7},
        {99,  7},
        {100, 3},
        {101, 3},
        {102, 7},
        {103, 7},
        {104, 0},
        {105, 0},
        {106, 4},
        {107, 4},
        {108, 0},
        {109, 0},
        {110, 4},
        {111, 4},
        {112, 3},
        {113, 3},
        {114, 7},
        {115, 7},
        {116, 3},
        {117, 3},
        {118, 7},
        {119, 7},
        {120, 0},
        {121, 0},
        {122, 4},
        {123, 4},
        {124, 0},
        {125, 0},
        {126, 4},
        {127, 4},
        {128, 14},
        {129, 14},
        {130, 10},
        {131, 10},
        {132, 14},
        {133, 14},
        {134, 10},
        {135, 10},
        {136, 13},
        {137, 13},
        {138, 9},
        {139, 9},
        {140, 13},
        {141, 13},
        {142, 9},
        {143, 9},
        {144, 14},
        {145, 14},
        {146, 10},
        {147, 10},
        {148, 14},
        {149, 14},
        {150, 10},
        {151, 10},
        {152, 13},
        {153, 13},
        {154, 13},
        {155, 9},
        {156, 13},
        {157, 13},
        {158, 9},
        {159, 9},
        {160, 2},
        {161, 2},
        {162, 6},
        {163, 6},
        {164, 2},
        {165, 2},
        {166, 6},
        {167, 6},
        {168, 1},
        {169, 1},
        {170, 5},
        {171, 5},
        {172, 1},
        {173, 1},
        {174, 5},
        {175, 5},
        {176, 2},
        {177, 2},
        {178, 6},
        {179, 6},
        {180, 2},
        {181, 2},
        {182, 6},
        {183, 6},
        {184, 1},
        {185, 1},
        {186, 5},
        {187, 5},
        {188, 1},
        {189, 1},
        {190, 5},
        {191, 18},
        {192, 14},
        {193, 14},
        {194, 10},
        {195, 10},
        {196, 14},
        {197, 14},
        {198, 10},
        {199, 10},
        {200, 13},
        {201, 13},
        {202, 9},
        {203, 9},
        {204, 13},
        {205, 13},
        {206, 9},
        {207, 9},
        {208, 14},
        {209, 14},
        {210, 10},
        {211, 10},
        {212, 14},
        {213, 14},
        {214, 10},
        {215, 10},
        {216, 13},
        {217, 13},
        {218, 9},
        {219, 9},
        {220, 13},
        {221, 13},
        {222, 9},
        {223, 9},
        {224, 2},
        {225, 2},
        {226, 6},
        {227, 6},
        {228, 2},
        {229, 2},
        {230, 6},
        {231, 6},
        {232, 1},
        {233, 1},
        {234, 5},
        {235, 5},
        {236, 1},
        {237, 1},
        {238, 5},
        {239, 17},
        {240, 2},
        {241, 2},
        {242, 6},
        {243, 6},
        {244, 2},
        {245, 2},
        {246, 6},
        {247, 6},
        {248, 1},
        {249, 1},
        {250, 5},
        {251, 16},
        {252, 1},
        {253, 1},
        {254, 19},
        {255, 5}
  };


  private SpriteRenderer spriteRenderer;

  private void Start()
  {
    spriteRenderer = gameObject.GetComponent<SpriteRenderer>();
    UpdateSprite();
  }

  private int GetIndex()
  {
    int index = 0;
    for (int i = 0; i < 8; i++) if (neigbours[i])
      {
        float power = Mathf.Pow(2, i);
        index += (int)power;
      }

    return index;
  }

  private void UpdateSprite()
  {
    UpdateSprite(indexToTile[GetIndex()]);
  }

  private void UpdateSprite(int index)
  {
    spriteRenderer.sprite = sprites[index];
  }

  public void SetNeigbours(bool[] newNeigbours)
  {
    neigbours = newNeigbours;
  }
}
